{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\DeliveryApp\\\\src\\\\pages\\\\OrderTracking.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport { io } from 'socket.io-client';\nimport L from 'leaflet';\nimport axios from 'axios';\nimport 'leaflet/dist/leaflet.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\nconst SOCKET_SERVER_URL = 'http://localhost:3001';\nconst OrderTracking = () => {\n  _s();\n  const {\n    orderId\n  } = useParams();\n  const [order, setOrder] = useState(null);\n  const [driverLocation, setDriverLocation] = useState(null);\n  const socketRef = useRef(null);\n  useEffect(() => {\n    axios.get(`http://localhost:3001/orders/${orderId}`).then(res => setOrder(res.data)).catch(() => console.error('Order fetch failed'));\n  }, [orderId]);\n  useEffect(() => {\n    socketRef.current = io(SOCKET_SERVER_URL);\n    socketRef.current.on(`orderLocationUpdate:${orderId}`, data => {\n      setDriverLocation([data.lat, data.lng]);\n    });\n    const driverId = localStorage.getItem('driverId');\n    if (driverId) {\n      const watchId = navigator.geolocation.watchPosition(({\n        coords\n      }) => {\n        socketRef.current.emit('driverLocation', {\n          orderId,\n          lat: coords.latitude,\n          lng: coords.longitude\n        });\n      }, err => console.error(err), {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 3000\n      });\n      return () => navigator.geolocation.clearWatch(watchId);\n    }\n    return () => socketRef.current.disconnect();\n  }, [orderId]);\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    center: [33.89, 35.5],\n    zoom: 13,\n    style: {\n      height: '400px',\n      width: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n      url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), driverLocation && /*#__PURE__*/_jsxDEV(Marker, {\n      position: driverLocation,\n      children: /*#__PURE__*/_jsxDEV(Popup, {\n        children: \"Driver is here!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(OrderTracking, \"Gd4mrBW09ftwXhQ1T9d/kxkcp2c=\", false, function () {\n  return [useParams];\n});\n_c = OrderTracking;\nconst styles = {\n  container: {\n    minHeight: '100vh',\n    backgroundColor: '#f0f2f5',\n    fontFamily: 'Arial, sans-serif'\n  },\n  header: {\n    backgroundColor: '#4CAF50',\n    color: 'white',\n    padding: '20px',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  headerTitle: {\n    margin: 0\n  },\n  navLink: {\n    color: 'white',\n    textDecoration: 'none',\n    fontSize: '16px'\n  },\n  content: {\n    padding: '30px',\n    maxWidth: '1200px',\n    margin: '0 auto'\n  },\n  orderDetails: {\n    backgroundColor: 'white',\n    padding: '20px',\n    borderRadius: '10px',\n    boxShadow: '0 2px 10px rgba(0,0,0,0.1)',\n    marginBottom: '30px'\n  },\n  status: {\n    color: '#4CAF50',\n    fontWeight: 'bold'\n  },\n  mapContainer: {\n    backgroundColor: 'white',\n    padding: '20px',\n    borderRadius: '10px',\n    boxShadow: '0 2px 10px rgba(0,0,0,0.1)'\n  },\n  map: {\n    height: '400px',\n    width: '100%',\n    borderRadius: '5px'\n  },\n  loadingText: {\n    textAlign: 'center',\n    marginTop: '50px',\n    fontSize: '18px'\n  },\n  errorText: {\n    textAlign: 'center',\n    marginTop: '50px',\n    color: 'red',\n    fontSize: '18px'\n  }\n};\nexport default OrderTracking;\nvar _c;\n$RefreshReg$(_c, \"OrderTracking\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","MapContainer","TileLayer","Marker","Popup","io","L","axios","jsxDEV","_jsxDEV","Icon","Default","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","SOCKET_SERVER_URL","OrderTracking","_s","orderId","order","setOrder","driverLocation","setDriverLocation","socketRef","get","then","res","data","catch","console","error","current","on","lat","lng","driverId","localStorage","getItem","watchId","navigator","geolocation","watchPosition","coords","emit","latitude","longitude","err","enableHighAccuracy","timeout","maximumAge","clearWatch","disconnect","center","zoom","style","height","width","children","url","fileName","_jsxFileName","lineNumber","columnNumber","position","_c","styles","container","minHeight","backgroundColor","fontFamily","header","color","padding","display","justifyContent","alignItems","headerTitle","margin","navLink","textDecoration","fontSize","content","maxWidth","orderDetails","borderRadius","boxShadow","marginBottom","status","fontWeight","mapContainer","map","loadingText","textAlign","marginTop","errorText","$RefreshReg$"],"sources":["C:/xampp/htdocs/DeliveryApp/src/pages/OrderTracking.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport { io } from 'socket.io-client';\r\nimport L from 'leaflet';\r\nimport axios from 'axios';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\r\n});\r\n\r\nconst SOCKET_SERVER_URL = 'http://localhost:3001';\r\n\r\nconst OrderTracking = () => {\r\n  const { orderId } = useParams();\r\n  const [order, setOrder] = useState(null);\r\n  const [driverLocation, setDriverLocation] = useState(null);\r\n  const socketRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    axios.get(`http://localhost:3001/orders/${orderId}`)\r\n      .then(res => setOrder(res.data))\r\n      .catch(() => console.error('Order fetch failed'));\r\n  }, [orderId]);\r\n\r\n  useEffect(() => {\r\n    socketRef.current = io(SOCKET_SERVER_URL);\r\n\r\n    socketRef.current.on(`orderLocationUpdate:${orderId}`, data => {\r\n      setDriverLocation([data.lat, data.lng]);\r\n    });\r\n\r\n    const driverId = localStorage.getItem('driverId');\r\n    if (driverId) {\r\n      const watchId = navigator.geolocation.watchPosition(\r\n        ({ coords }) => {\r\n          socketRef.current.emit('driverLocation', {\r\n            orderId,\r\n            lat: coords.latitude,\r\n            lng: coords.longitude\r\n          });\r\n        },\r\n        err => console.error(err),\r\n        { enableHighAccuracy: true, timeout: 5000, maximumAge: 3000 }\r\n      );\r\n      return () => navigator.geolocation.clearWatch(watchId);\r\n    }\r\n\r\n    return () => socketRef.current.disconnect();\r\n  }, [orderId]);\r\n\r\n  return (\r\n    <MapContainer center={[33.89, 35.5]} zoom={13} style={{ height: '400px', width: '100%' }}>\r\n      <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\r\n      {driverLocation && (\r\n        <Marker position={driverLocation}>\r\n          <Popup>Driver is here!</Popup>\r\n        </Marker>\r\n      )}\r\n    </MapContainer>\r\n  );\r\n};\r\n\r\n\r\nconst styles = {\r\n  container: {\r\n    minHeight: '100vh',\r\n    backgroundColor: '#f0f2f5',\r\n    fontFamily: 'Arial, sans-serif',\r\n  },\r\n  header: {\r\n    backgroundColor: '#4CAF50',\r\n    color: 'white',\r\n    padding: '20px',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n  },\r\n  headerTitle: {\r\n    margin: 0,\r\n  },\r\n  navLink: {\r\n    color: 'white',\r\n    textDecoration: 'none',\r\n    fontSize: '16px',\r\n  },\r\n  content: {\r\n    padding: '30px',\r\n    maxWidth: '1200px',\r\n    margin: '0 auto',\r\n  },\r\n  orderDetails: {\r\n    backgroundColor: 'white',\r\n    padding: '20px',\r\n    borderRadius: '10px',\r\n    boxShadow: '0 2px 10px rgba(0,0,0,0.1)',\r\n    marginBottom: '30px',\r\n  },\r\n  status: {\r\n    color: '#4CAF50',\r\n    fontWeight: 'bold',\r\n  },\r\n  mapContainer: {\r\n    backgroundColor: 'white',\r\n    padding: '20px',\r\n    borderRadius: '10px',\r\n    boxShadow: '0 2px 10px rgba(0,0,0,0.1)',\r\n  },\r\n  map: {\r\n    height: '400px',\r\n    width: '100%',\r\n    borderRadius: '5px',\r\n  },\r\n  loadingText: {\r\n    textAlign: 'center',\r\n    marginTop: '50px',\r\n    fontSize: '18px',\r\n  },\r\n  errorText: {\r\n    textAlign: 'center',\r\n    marginTop: '50px',\r\n    color: 'red',\r\n    fontSize: '18px',\r\n  },\r\n};\r\n\r\nexport default OrderTracking;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}